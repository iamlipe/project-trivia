(this["webpackJsonpproject-trivia"]=this["webpackJsonpproject-trivia"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/world_1.bda62d85.png"},32:function(e,t,a){e.exports=a.p+"static/media/warning.840ae09f.svg"},33:function(e,t,a){e.exports=a.p+"static/media/trivia.e323612a.png"},34:function(e,t,a){e.exports=a.p+"static/media/config.cb6edcd6.svg"},36:function(e,t,a){e.exports=a.p+"static/media/header.e48c2700.svg"},37:function(e,t,a){e.exports=a.p+"static/media/brain_1.5d322e64.png"},38:function(e,t,a){e.exports=a.p+"static/media/stop.31882b3e.svg"},39:function(e,t,a){e.exports=a.p+"static/media/0.d202c301.svg"},40:function(e,t,a){e.exports=a.p+"static/media/1.d9ce77c9.svg"},41:function(e,t,a){e.exports=a.p+"static/media/2.d3d99502.svg"},42:function(e,t,a){e.exports=a.p+"static/media/home.6f564c6c.svg"},43:function(e,t,a){e.exports=a.p+"static/media/music.989f7fe9.svg"},44:function(e,t,a){e.exports=a.p+"static/media/x.e00a0778.svg"},45:function(e,t,a){e.exports=a.p+"static/media/brain_2.4c3b6e13.png"},46:function(e,t,a){e.exports=a.p+"static/media/world_2.ecb3974b.png"},47:function(e,t,a){e.exports=a.p+"static/media/sneaky.2823b103.mp3"},51:function(e,t,a){e.exports=a(65)},60:function(e,t,a){},63:function(e,t){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),c=a.n(i),s=a(8),o=a(13),l=(a(60),a(16)),u=a(21),m=a(22),d=a.n(m),p=a(3),g=a(4),b=a(6),h=a(5),f=a(1),v=a(7),y=a(30),E=a.n(y),O=function(){return fetch("https://opentdb.com/api.php?amount=5&token=".concat(localStorage.getItem("token"))).then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))},k=function(e,t){return{type:"SET_TIMER",timer:e,answer:t}},j=a(31),S=a.n(j),N=a(32),x=a.n(N),w=a(33),C=a.n(w),I=a(34),T=a.n(I),P=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(b.a)(this,Object(h.a)(t).call(this))).state={email:"",name:"",valid:!1},e.validLogin=e.validLogin.bind(Object(f.a)(e)),e.handleForm=e.handleForm.bind(Object(f.a)(e)),e.requestToken=e.requestToken.bind(Object(f.a)(e)),e.handleHash=e.handleHash.bind(Object(f.a)(e)),e.buttonDisabled=e.buttonDisabled.bind(Object(f.a)(e)),e}return Object(v.a)(t,e),Object(g.a)(t,[{key:"requestToken",value:function(){var e,t,a,n,r,i,c,s,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.getAPI,a=e.sendFormLogin,n=this.state,r=n.email,i=n.name,a(r,i),c={player:{name:document.getElementById("name").value,assertions:0,score:0,gravatarEmail:document.getElementById("email").value},ranking:null!==localStorage.getItem("state")?JSON.parse(localStorage.getItem("state")).ranking:[]},localStorage.setItem("state",JSON.stringify(c)),this.handleHash(),l.next=8,d.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 8:return s=l.sent,l.next=11,d.a.awrap(s.json());case 11:o=l.sent,localStorage.setItem("token",o.token),document.querySelector("audio").play(),t();case 15:case"end":return l.stop()}}),null,this)}},{key:"handleForm",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n)),this.validLogin()}},{key:"validLogin",value:function(){var e=this.state,t=e.email,a=e.name,n=null!==t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),r=a.length>=1;!0===n&&!0===r&&this.setState({valid:!0})}},{key:"handleHash",value:function(){var e=this.state.email,t=E()(e).toString();localStorage.setItem("hash",t)}},{key:"buttonDisabled",value:function(){return r.a.createElement("input",{className:"disabled",type:"Button",value:"jogar","data-testid":"btn-play",disabled:!0})}},{key:"render",value:function(){var e=this.state,t=e.valid,a=e.name;return r.a.createElement("div",{className:"container-login"},r.a.createElement("img",{className:"world-login",src:S.a,alt:"world"}),r.a.createElement("img",{className:"warning-login",src:x.a,alt:"warning"}),r.a.createElement("img",{className:"trivia-login",src:C.a,alt:"trivia"}),r.a.createElement("div",{className:"form-login"},r.a.createElement("input",{placeholder:"email",id:"email",name:"email",type:"email","data-testid":"input-gravatar-email",onChange:this.handleForm}),r.a.createElement("input",{placeholder:"name",id:"name",name:"name",type:"text","data-testid":"input-player-name",onChange:this.handleForm}),r.a.createElement(s.c,{to:{pathname:"/game",state:{name:a}}},t?r.a.createElement("input",{className:"enabled",type:"Button",onClick:this.requestToken,value:"jogar","data-testid":"btn-play"}):this.buttonDisabled())),r.a.createElement(s.c,{className:"config-login",to:"/settings"},r.a.createElement("img",{src:T.a,alt:"config"}),r.a.createElement("input",{type:"Button",defaultValue:"Configurac\xe3o","data-testid":"btn-settings"})))}}]),t}(r.a.Component),R=Object(o.b)(null,(function(e){return{getAPI:function(){return e((function(e){return e({type:"fetchAPI"}),O().then((function(t){return e(function(e){return{type:"FETCH_API_SUCESS",payload:e}}(t))}),(function(){return e("FETCH_API_ERROR"())}))}))},sendFormLogin:function(t,a){return e(function(e,t){return{type:"GET_USER",email:e,name:t}}(t,a))}}}))(P),B=a(36),J=a.n(B),A=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.waveHeader,a=e.color,n=e.point;return r.a.createElement("div",{className:"container-header"},r.a.createElement("div",{className:"content-header"},r.a.createElement("div",{className:"profile-box"},r.a.createElement("img",{className:"profile-picture","data-testid":"header-profile-picture",alt:"img-profile",src:"https://www.gravatar.com/avatar/".concat(localStorage.getItem("hash"))}),r.a.createElement("span",{className:"header-name ".concat(a),"data-testid":"header-player-name"},JSON.parse(localStorage.getItem("state")).player.name)),r.a.createElement("span",{className:"header-score ".concat(a),"data-testid":"header-score"},"score: ".concat(0===n?JSON.parse(localStorage.getItem("state")).player.score:n))),!1===t?null:r.a.createElement("img",{className:"wave",src:J.a,alt:"wave"}))}}]),t}(r.a.Component),L=Object(o.b)((function(e){var t=e.game,a=e.user;return{answers:t.answer,loading:t.isLoading,name:a.name,timer:t.timer,point:t.point}}),null)(A),q=a(50),F=a(9),_=a(37),H=a.n(_),Q=a(38),W=a.n(Q),D=function(e){function t(e){var a;Object(p.a)(this,t),a=Object(b.a)(this,Object(h.a)(t).call(this,e));var n=localStorage.getItem("state");return a.state={indexQuestion:0,isCorrect:"",isIncorrect:"",player:JSON.parse(n)},a.renderGame=a.renderGame.bind(Object(f.a)(a)),a.handleBotao=a.handleBotao.bind(Object(f.a)(a)),a.handleClick=a.handleClick.bind(Object(f.a)(a)),a.setTimer=a.setTimer.bind(Object(f.a)(a)),a.nextAnswers=a.nextAnswers.bind(Object(f.a)(a)),a.setState=a.setState.bind(Object(f.a)(a)),a.mudarState=a.mudarState.bind(Object(f.a)(a)),a.handleClickQuestion=a.handleClickQuestion.bind(Object(f.a)(a)),a.renderButtonWithLink=a.renderButtonWithLink.bind(Object(f.a)(a)),a.renderButtonWithoutLink=a.renderButtonWithoutLink.bind(Object(f.a)(a)),a.savePlayerRanking=a.savePlayerRanking.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentDidUpdate",value:function(){var e=localStorage.getItem("state"),t=this.props.point,a=Object(F.a)({},JSON.parse(e),{player:Object(F.a)({},JSON.parse(e).player,{score:t})});localStorage.setItem("state",JSON.stringify(a))}},{key:"setScore",value:function(e){var t=this.props,a=t.timer,n=t.pergunta,r=t.setPoint,i=n[this.state.indexQuestion].difficulty;r("correct"===e?10+a*{easy:1,medium:2,hard:3}[i]:0),this.mudarState()}},{key:"setTimer",value:function(){var e=this,t=setInterval((function(){var a=e.props,n=a.loading,r=a.reduxTimer,i=a.question,c=a.timer;if(c<=0||!0===i)clearInterval(t),r(c,i),Array.from(document.getElementsByClassName("botao")).forEach((function(e){e.disabled=!0}));else if(!1===n){r(parseFloat(c)-1,i)}}),1e3)}},{key:"mudarState",value:function(){var e=this.props.point;this.setState((function(t){return Object(F.a)({},t,{player:parseFloat(t.player.point)+e})}))}},{key:"handleBotao",value:function(e,t){var a=this.state.isIncorrect;return r.a.createElement("button",{"data-testid":"wrong-answer-".concat(t),className:"".concat(a," botao"),type:"button",value:"incorrect",key:t,onClick:this.handleClick},e)}},{key:"handleClick",value:function(e){var t=e.target.value,a=localStorage.getItem("state"),n=this.props,r=n.reduxTimer,i=n.timer;if("correct"===t){this.setState({isCorrect:t,isIncorrect:"incorrect"}),this.setScore("correct");var c=Object(F.a)({},JSON.parse(a),{player:Object(F.a)({},JSON.parse(a).player,{assertions:JSON.parse(a).player.assertions+1})});localStorage.setItem("state",JSON.stringify(c))}else"incorrect"===t&&(this.setState({isCorrect:"correct",isIncorrect:t}),this.setScore("incorrect"));r(i,!0)}},{key:"handleClickQuestion",value:function(){var e=this.props.reduxTimer;this.setState((function(e){return{indexQuestion:e.indexQuestion+1,isCorrect:"",isIncorrect:""}})),Array.from(document.getElementsByClassName("botao")).forEach((function(e){e.disabled=!1}));e(30,!1),this.setTimer()}},{key:"nextAnswers",value:function(){return 4===this.state.indexQuestion?this.renderButtonWithLink():this.renderButtonWithoutLink()}},{key:"savePlayerRanking",value:function(){var e=this.props.reset,t=localStorage.getItem("state"),a={name:JSON.parse(t).player.name,score:JSON.parse(t).player.score,picture:"https://www.gravatar.com/avatar/".concat(localStorage.getItem("hash"))},n=Object(F.a)({},JSON.parse(t),{ranking:[].concat(Object(q.a)(JSON.parse(t).ranking),[a])});localStorage.setItem("state",JSON.stringify(n)),e()}},{key:"renderButtonWithLink",value:function(){return r.a.createElement(s.c,{to:"/feedback"},r.a.createElement("button",{className:"next-button",type:"button","data-testid":"btn-next",onClick:this.savePlayerRanking},"Feedback"))}},{key:"renderButtonWithoutLink",value:function(){return r.a.createElement("button",{className:"next-button",type:"button",onClick:this.handleClickQuestion,"data-testid":"btn-next"},"Proxima")}},{key:"renderGame",value:function(){var e=this,t=this.props,a=t.pergunta,n=t.question,i=t.timer,c=this.state,s=c.indexQuestion,o=c.isCorrect;return r.a.createElement("div",{className:"container-game-screen"},r.a.createElement("h5",{"data-testid":"question-category"},a[s].category),r.a.createElement("div",{className:"question-box"},r.a.createElement("h1",{className:"question","data-testid":"question-text"},a[s].question)),r.a.createElement("div",{className:"button-box"},r.a.createElement("button",{type:"button",className:"".concat(o," botao"),"data-testid":"correct-answer",value:"correct",onClick:this.handleClick},a[s].correct_answer),a[s].incorrect_answers.map((function(t,a){return e.handleBotao(t,a)}))),r.a.createElement("img",{className:"brain",src:H.a,alt:"brain"}),r.a.createElement("div",{className:"box-timer"},r.a.createElement("img",{className:"stop",src:W.a,alt:"stop"}),r.a.createElement("span",{className:"timer"},i)),!0===n?this.nextAnswers():null)}},{key:"render",value:function(){var e=this.props.answer.isLoading;return r.a.createElement("div",null,!0===e?r.a.createElement("h1",null,"Loading"):this.renderGame())}}]),t}(r.a.Component),M=Object(o.b)((function(e){return{loading:e.game.isLoading,answer:e.game,timer:e.game.timer,question:e.game.question,pergunta:e.game.answer,point:e.game.point}}),(function(e){return{reduxTimer:function(t,a){return e(k(t,a))},setPoint:function(t){return e(function(e){return{type:"SET_POINT",point:e}}(t))},reset:function(){return e({type:"RESET"})}}}))(D),G=a(39),U=a.n(G),V=a(40),K=a.n(V),$=a(41),z=a.n($),X=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"renderMedal",value:function(){var e=this.props.podium;return 0===e?r.a.createElement("img",{className:"medal",src:U.a,alt:"medal"}):1===e?r.a.createElement("img",{className:"medal",src:K.a,alt:"medal"}):2===e?r.a.createElement("img",{className:"medal",src:z.a,alt:"medal"}):void 0}},{key:"render",value:function(){var e=this.props.data,t=e.name,a=e.score,n=e.picture;return r.a.createElement("div",{className:"list-ranking"},r.a.createElement("div",{className:"player-info"},r.a.createElement("img",{alt:"img-profile",src:n}),r.a.createElement("span",{"data-testid":"player-name-".concat(t)},t)),r.a.createElement("div",{className:"medal-box"},this.renderMedal()),r.a.createElement("span",{className:"score-ranking","data-testid":"player-score-".concat(a)},"SCORE:  ".concat(a)))}}]),t}(r.a.Component),Y=a(42),Z=a.n(Y),ee=a(43),te=a.n(ee),ae=a(44),ne=a.n(ae),re=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(b.a)(this,Object(h.a)(t).call(this))).state={song:!1},e.setSong=e.setSong.bind(Object(f.a)(e)),e}return Object(v.a)(t,e),Object(g.a)(t,[{key:"setSong",value:function(){var e=this.state.song,t=document.querySelector("audio"),a=document.getElementsByClassName("x")[0];this.setState((function(e){return{song:!e.song}})),!0===e?(t.pause(),a.style.display="flex"):(t.play(),a.style.display="none")}},{key:"render",value:function(){return r.a.createElement("nav",{className:"nav"},r.a.createElement(s.c,{to:"/"},r.a.createElement("img",{src:Z.a,alt:"home"})),r.a.createElement("button",{className:"music",onClick:this.setSong,type:"button"},r.a.createElement("img",{src:te.a,alt:"music"}),r.a.createElement("img",{className:"x",src:ne.a,alt:"x"})))}}]),t}(r.a.Component),ie=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.location.state.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{name:e}),r.a.createElement("div",{className:"container-game"},r.a.createElement(M,null)),r.a.createElement(re,null))}}]),t}(r.a.Component),ce=Object(o.b)((function(e){var t=e.game;return{loading:t.isLoading,question:t.question,timer:t.timer}}),(function(e){return{reduxTimer:function(t,a){return e(k(t,a))}}}))(ie),se=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es")}}]),t}(r.a.Component),oe=a(45),le=a.n(oe),ue=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).handleFeedback=a.handleFeedback.bind(Object(f.a)(a)),a.handleRanking=a.handleRanking.bind(Object(f.a)(a)),a.handlePlayAgain=a.handlePlayAgain.bind(Object(f.a)(a)),a.handleButtRanking=a.handleButtRanking.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"handleFeedback",value:function(){var e=localStorage.getItem("state");return JSON.parse(e).player.assertions<3?r.a.createElement("p",{className:"feedback-mensage","data-testid":"feedback-text"},"Podia ser melhor..."):JSON.parse(e).player.assertions>=3?r.a.createElement("p",{className:"feedback-mensage","data-testid":"feedback-text"},"Mandou bem!"):void 0}},{key:"handleRanking",value:function(){var e=localStorage.getItem("state");return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"assertions","data-testid":"feedback-total-question"},"Acertou ".concat(JSON.parse(e).player.assertions," perguntas")),r.a.createElement("p",{className:"score","data-testid":"feedback-total-score"},"Voc\xea conseguiu ".concat(JSON.parse(e).player.score," pontos")))}},{key:"handlePlayAgain",value:function(){return r.a.createElement(s.c,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again"},"jogar",r.a.createElement("br",null),"novamente"))}},{key:"handleButtRanking",value:function(){return r.a.createElement(s.c,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking"},"Ranking"))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{waveHeader:!1,color:"black"}),r.a.createElement("div",{className:"container-feedback"},this.handleFeedback(),this.handleRanking(),r.a.createElement("img",{className:"brain-2",src:le.a,alt:"brain"}),r.a.createElement("div",{className:"button-box"},this.handlePlayAgain(),this.handleButtRanking())),r.a.createElement(re,null))}}]),t}(r.a.Component),me=a(46),de=a.n(me),pe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).handlePlayAgain=a.handlePlayAgain.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"handlePlayAgain",value:function(){return r.a.createElement(s.c,{className:"play-again",to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-go-home"},"Jogar",r.a.createElement("br",null)," ","Novamente"))}},{key:"render",value:function(){var e=localStorage.getItem("state");return r.a.createElement("div",{className:"container-ranking"},r.a.createElement("h1",{className:"title-ranking","data-testid":"ranking-title"},"RANKING"),r.a.createElement("div",{className:"content-list"},JSON.parse(e).ranking.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement(X,{key:t,data:e,podium:t})}))),this.handlePlayAgain(),r.a.createElement("img",{className:"world",src:de.a,alt:"world"}),r.a.createElement(re,null))}}]),t}(r.a.Component),ge=a(47),be=a.n(ge);var he=function(){return r.a.createElement(s.b,{basename:"/"},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/game",component:ce}),r.a.createElement(l.a,{path:"/settings",component:se}),r.a.createElement(l.a,{path:"/feedback",component:ue}),r.a.createElement(l.a,{path:"/ranking",component:pe}),r.a.createElement(l.a,{exact:!0,path:"/",component:R})),r.a.createElement("audio",{loop:"loop",autoPlay:!0},r.a.createElement("source",{src:be.a,type:"audio/mp3"})))},fe=a(15),ve=a(48),ye=a(49),Ee={email:"",name:""},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(F.a)({},e,{email:t.email,name:t.name});default:return e}},ke={isLoading:!0,erro:null,answer:{},timer:30,question:!1,point:0},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetchAPI":return Object(F.a)({},e,{isLoading:!0});case"FETCH_API_SUCESS":return Object(F.a)({},e,{isLoading:!1,answer:t.payload.results});case"FETCH_API_ERROR":return Object(F.a)({},e,{isLoading:!1,erro:"DEU RUIM"});case"SET_TIMER":return Object(F.a)({},e,{timer:t.timer,question:t.answer});case"SET_POINT":return Object(F.a)({},e,{point:e.point+t.point});case"RESET":return{isLoading:!0,erro:null,answer:{},timer:30,question:!1,point:0};default:return e}},Se=Object(fe.combineReducers)({user:Oe,game:je}),Ne=Object(fe.createStore)(Se,Object(ve.composeWithDevTools)(Object(fe.applyMiddleware)(ye.a)));window.Cypress&&(window.store=Ne);var xe=Ne;c.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:xe},r.a.createElement(he,null))),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.2f55a67c.chunk.js.map